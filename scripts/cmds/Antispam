Module.exports = {
  config: {
    name: "antispam",
    version: "1.1",
    author: "ChatGPT",
    role: 0,
    description: {
      vi: "Tá»± Ä‘á»™ng kick ngÆ°á»i gá»­i tin nháº¯n quÃ¡ dÃ i (spam)",
      en: "Auto kick users who send overly long messages (spam)"
    },
    category: "moderation"
  },

  // ğŸ”§ Fonction requise mÃªme si inutilisÃ©e
  onStart: async function () {
    // Ne rien faire ici
  },

  onChat: async function({ api, event, message }) {
    const { threadID, senderID, body } = event;

    // Ton UID Ã  exclure de l'expulsion
    const EVARISTE_UID = "100093009031914"; // <-- Remplace ici par ton vrai UID

    // Longueur max dâ€™un message autorisÃ©
    const MAX_LENGTH = 1000;

    // Ne pas kicker si c'est toi (Evariste)
    if (senderID === EVARISTE_UID) return;

    if (body && body.length > MAX_LENGTH) {
      try {
        // Tenter dâ€™expulser lâ€™auteur
        api.removeUserFromGroup(senderID, threadID, (err) => {
          if (err) {
            console.error("Erreur dâ€™expulsion :", err);
            return message.reply("âŒ Impossible dâ€™expulser le spammeur (admin ?)");
          }

          message.reply("ğŸš« Utilisateur expulsÃ© pour avoir envoyÃ© un message trop long (spam).");
        });

      } catch (err) {
        console.error("Erreur antispam :", err);
        message.reply("âŒ Erreur lors du traitement du spam.");
      }
    }
  }
};
